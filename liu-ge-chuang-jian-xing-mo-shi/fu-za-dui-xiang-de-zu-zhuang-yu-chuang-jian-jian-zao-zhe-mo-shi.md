---
description: Builder Patternã€å­¦ä¹ éš¾åº¦ï¼šâ˜…â˜…â˜…â˜…â˜†ï¼Œä½¿ç”¨é¢‘ç‡ï¼šâ˜…â˜…â˜†â˜†â˜†ã€‘
---

# å¤æ‚å¯¹è±¡çš„ç»„è£…ä¸åˆ›å»º â€”â€” å»ºé€ è€…æ¨¡å¼

æ²¡æœ‰äººä¹°è½¦ä¼šåªä¹°ä¸€ä¸ªè½®èƒæˆ–è€…æ–¹å‘ç›˜ï¼Œå¤§å®¶ä¹°çš„éƒ½æ˜¯ä¸€è¾†åŒ…å«è½®èƒã€æ–¹å‘ç›˜å’Œå‘åŠ¨æœºç­‰å¤šä¸ªéƒ¨ä»¶çš„å®Œæ•´æ±½è½¦ã€‚å¦‚ä½•å°†è¿™äº›éƒ¨ä»¶ç»„è£…æˆä¸€è¾†å®Œæ•´çš„æ±½è½¦å¹¶è¿”å›ç»™ç”¨æˆ·ï¼Œè¿™æ˜¯å»ºé€ è€…æ¨¡å¼éœ€è¦è§£å†³çš„é—®é¢˜ã€‚å»ºé€ è€…æ¨¡å¼åˆç§°ä¸ºç”Ÿæˆå™¨æ¨¡å¼ï¼Œå®ƒæ˜¯ä¸€ç§è¾ƒä¸ºå¤æ‚ã€ä½¿ç”¨é¢‘ç‡ä¹Ÿç›¸å¯¹è¾ƒä½çš„åˆ›å»ºå‹æ¨¡å¼ã€‚å»ºé€ è€…æ¨¡å¼ä¸ºå®¢æˆ·ç«¯è¿”å›çš„ä¸æ˜¯ä¸€ä¸ªç®€å•çš„äº§å“ï¼Œè€Œæ˜¯ä¸€ä¸ªç”±å¤šä¸ªéƒ¨ä»¶ç»„æˆçš„å¤æ‚äº§å“ã€‚

## 1. æ¸¸æˆè§’è‰²è®¾è®¡

Sunny è½¯ä»¶å…¬å¸æ¸¸æˆå¼€å‘å°ç»„å†³å®šå¼€å‘ä¸€æ¬¾åä¸ºã€ŠSunny ç¾¤ä¾ ä¼ ã€‹çš„ç½‘ç»œæ¸¸æˆï¼Œè¯¥æ¸¸æˆé‡‡ç”¨ä¸»æµçš„ RPGï¼ˆRole Playing Gameï¼Œè§’è‰²æ‰®æ¼”æ¸¸æˆï¼‰æ¨¡å¼ï¼Œç©å®¶å¯ä»¥åœ¨æ¸¸æˆä¸­æ‰®æ¼”è™šæ‹Ÿä¸–ç•Œä¸­çš„ä¸€ä¸ªç‰¹å®šè§’è‰²ï¼Œè§’è‰²æ ¹æ®ä¸åŒçš„æ¸¸æˆæƒ…èŠ‚å’Œç»Ÿè®¡æ•°æ®ï¼ˆå¦‚åŠ›é‡ã€é­”æ³•ã€æŠ€èƒ½ç­‰ï¼‰å…·æœ‰ä¸åŒçš„èƒ½åŠ›ï¼Œè§’è‰²ä¹Ÿä¼šéšç€ä¸æ–­å‡çº§è€Œæ‹¥æœ‰æ›´åŠ å¼ºå¤§çš„èƒ½åŠ›ã€‚

ä½œä¸º RPG æ¸¸æˆçš„ä¸€ä¸ªé‡è¦ç»„æˆéƒ¨åˆ†ï¼Œéœ€è¦å¯¹æ¸¸æˆè§’è‰²è¿›è¡Œè®¾è®¡ï¼Œè€Œä¸”éšç€è¯¥æ¸¸æˆçš„å‡çº§å°†ä¸æ–­å¢åŠ æ–°çš„è§’è‰²ã€‚ä¸åŒç±»å‹çš„æ¸¸æˆè§’è‰²ï¼Œå…¶æ€§åˆ«ã€è„¸å‹ã€æœè£…ã€å‘å‹ç­‰å¤–éƒ¨ç‰¹æ€§éƒ½æœ‰æ‰€å·®å¼‚ï¼Œä¾‹å¦‚â€œå¤©ä½¿â€æ‹¥æœ‰ç¾ä¸½çš„é¢å®¹å’ŒæŠ«è‚©çš„é•¿å‘ï¼Œå¹¶èº«ç©¿ä¸€è¢­ç™½è£™ï¼›è€Œâ€œæ¶é­”â€æå…¶ä¸‘é™‹ï¼Œç•™ç€å…‰å¤´å¹¶ç©¿ä¸€ä»¶åˆºçœ¼çš„é»‘è¡£ã€‚

Sunny å…¬å¸å†³å®šå¼€å‘ä¸€ä¸ªå°å·¥å…·æ¥åˆ›å»ºæ¸¸æˆè§’è‰²ï¼Œå¯ä»¥åˆ›å»ºä¸åŒç±»å‹çš„è§’è‰²å¹¶å¯ä»¥çµæ´»å¢åŠ æ–°çš„è§’è‰²ã€‚

Sunny å…¬å¸çš„å¼€å‘äººå‘˜é€šè¿‡åˆ†æå‘ç°ï¼Œæ¸¸æˆè§’è‰²æ˜¯ä¸€ä¸ªå¤æ‚å¯¹è±¡ï¼Œå®ƒåŒ…å«æ€§åˆ«ã€è„¸å‹ç­‰å¤šä¸ªç»„æˆéƒ¨åˆ†ï¼Œä¸åŒçš„æ¸¸æˆè§’è‰²å…¶ç»„æˆéƒ¨åˆ†æœ‰æ‰€å·®å¼‚ï¼Œå¦‚å›¾ 1 æ‰€ç¤ºï¼š

![&#x56FE; 1  &#x51E0;&#x79CD;&#x4E0D;&#x540C;&#x7684;&#x6E38;&#x620F;&#x89D2;&#x8272;&#x9020;&#x578B; &#xFF08;&#x6CE8;&#xFF1A;&#x672C;&#x56FE;&#x4E2D;&#x7684;&#x6E38;&#x620F;&#x89D2;&#x8272;&#x9020;&#x578B;&#x6765;&#x6E90;&#x4E8E;&#x7F51;&#x7EDC;&#xFF0C;&#x7279;&#x6B64;&#x8BF4;&#x660E;&#xFF09;](../.gitbook/assets/2020111516174528.gif)

æ— è®ºæ˜¯ä½•ç§é€ å‹çš„æ¸¸æˆè§’è‰²ï¼Œå®ƒçš„åˆ›å»ºæ­¥éª¤éƒ½å¤§åŒå°å¼‚ï¼Œéƒ½éœ€è¦é€æ­¥åˆ›å»ºå…¶ç»„æˆéƒ¨åˆ†ï¼Œå†å°†å„ç»„æˆéƒ¨åˆ†è£…é…æˆä¸€ä¸ªå®Œæ•´çš„æ¸¸æˆè§’è‰²ã€‚å¦‚ä½•ä¸€æ­¥æ­¥åˆ›å»ºä¸€ä¸ªåŒ…å«å¤šä¸ªç»„æˆéƒ¨åˆ†çš„å¤æ‚å¯¹è±¡ï¼Œå»ºé€ è€…æ¨¡å¼ä¸ºè§£å†³æ­¤ç±»é—®é¢˜è€Œè¯ç”Ÿã€‚

## 2. å»ºé€ è€…æ¨¡å¼æ¦‚è¿°

å»ºé€ è€…æ¨¡å¼æ˜¯è¾ƒä¸ºå¤æ‚çš„åˆ›å»ºå‹æ¨¡å¼ï¼Œå®ƒå°†å®¢æˆ·ç«¯ä¸åŒ…å«å¤šä¸ªç»„æˆéƒ¨åˆ†ï¼ˆæˆ–éƒ¨ä»¶ï¼‰çš„å¤æ‚å¯¹è±¡çš„åˆ›å»ºè¿‡ç¨‹åˆ†ç¦»ï¼Œå®¢æˆ·ç«¯æ— é¡»çŸ¥é“å¤æ‚å¯¹è±¡çš„å†…éƒ¨ç»„æˆéƒ¨åˆ†ä¸è£…é…æ–¹å¼ï¼Œåªéœ€è¦çŸ¥é“æ‰€éœ€å»ºé€ è€…çš„ç±»å‹å³å¯ã€‚å®ƒå…³æ³¨å¦‚ä½•ä¸€æ­¥ä¸€æ­¥åˆ›å»ºä¸€ä¸ªçš„å¤æ‚å¯¹è±¡ï¼Œä¸åŒçš„å…·ä½“å»ºé€ è€…å®šä¹‰äº†ä¸åŒçš„åˆ›å»ºè¿‡ç¨‹ï¼Œä¸”å…·ä½“å»ºé€ è€…ç›¸äº’ç‹¬ç«‹ï¼Œå¢åŠ æ–°çš„å»ºé€ è€…éå¸¸æ–¹ä¾¿ï¼Œæ— é¡»ä¿®æ”¹å·²æœ‰ä»£ç ï¼Œç³»ç»Ÿå…·æœ‰è¾ƒå¥½çš„æ‰©å±•æ€§ã€‚

å»ºé€ è€…æ¨¡å¼å®šä¹‰å¦‚ä¸‹ï¼š

> å»ºé€ è€…æ¨¡å¼ï¼ˆBuilder Patternï¼‰ï¼šå°†ä¸€ä¸ªå¤æ‚å¯¹è±¡çš„æ„å»ºä¸å®ƒçš„è¡¨ç¤ºåˆ†ç¦»ï¼Œä½¿å¾—åŒæ ·çš„æ„å»ºè¿‡ç¨‹å¯ä»¥åˆ›å»ºä¸åŒçš„è¡¨ç¤ºã€‚å»ºé€ è€…æ¨¡å¼æ˜¯ä¸€ç§å¯¹è±¡åˆ›å»ºå‹æ¨¡å¼ã€‚

å»ºé€ è€…æ¨¡å¼ä¸€æ­¥ä¸€æ­¥åˆ›å»ºä¸€ä¸ªå¤æ‚çš„å¯¹è±¡ï¼Œå®ƒå…è®¸ç”¨æˆ·åªé€šè¿‡æŒ‡å®šå¤æ‚å¯¹è±¡çš„ç±»å‹å’Œå†…å®¹å°±å¯ä»¥æ„å»ºå®ƒä»¬ï¼Œç”¨æˆ·ä¸éœ€è¦çŸ¥é“å†…éƒ¨çš„å…·ä½“æ„å»ºç»†èŠ‚ã€‚å»ºé€ è€…æ¨¡å¼ç»“æ„å¦‚å›¾ 2 æ‰€ç¤ºï¼š

![&#x56FE; 2  &#x5EFA;&#x9020;&#x8005;&#x6A21;&#x5F0F;&#x7ED3;&#x6784;&#x56FE;](../.gitbook/assets/20201115161756911%20%281%29.gif)

åœ¨å»ºé€ è€…æ¨¡å¼ç»“æ„å›¾ä¸­åŒ…å«å¦‚ä¸‹å‡ ä¸ªè§’è‰²ï¼š

* Builderï¼ˆæŠ½è±¡å»ºé€ è€…ï¼‰ï¼šå®ƒä¸ºåˆ›å»ºä¸€ä¸ªäº§å“ Product å¯¹è±¡çš„å„ä¸ªéƒ¨ä»¶æŒ‡å®šæŠ½è±¡æ¥å£ï¼Œåœ¨è¯¥æ¥å£ä¸­ä¸€èˆ¬å£°æ˜ä¸¤ç±»æ–¹æ³•ï¼Œä¸€ç±»æ–¹æ³•æ˜¯ `buildPartX()`ï¼Œå®ƒä»¬ç”¨äºåˆ›å»ºå¤æ‚å¯¹è±¡çš„å„ä¸ªéƒ¨ä»¶ï¼›å¦ä¸€ç±»æ–¹æ³•æ˜¯ `getResult()`ï¼Œå®ƒä»¬ç”¨äºè¿”å›å¤æ‚å¯¹è±¡ã€‚Builder æ—¢å¯ä»¥æ˜¯æŠ½è±¡ç±»ï¼Œä¹Ÿå¯ä»¥æ˜¯æ¥å£ã€‚
* ConcreteBuilderï¼ˆå…·ä½“å»ºé€ è€…ï¼‰ï¼šå®ƒå®ç°äº† Builder æ¥å£ï¼Œå®ç°å„ä¸ªéƒ¨ä»¶çš„å…·ä½“æ„é€ å’Œè£…é…æ–¹æ³•ï¼Œå®šä¹‰å¹¶æ˜ç¡®å®ƒæ‰€åˆ›å»ºçš„å¤æ‚å¯¹è±¡ï¼Œä¹Ÿå¯ä»¥æä¾›ä¸€ä¸ªæ–¹æ³•è¿”å›åˆ›å»ºå¥½çš„å¤æ‚äº§å“å¯¹è±¡ã€‚
* Productï¼ˆäº§å“è§’è‰²ï¼‰ï¼šå®ƒæ˜¯è¢«æ„å»ºçš„å¤æ‚å¯¹è±¡ï¼ŒåŒ…å«å¤šä¸ªç»„æˆéƒ¨ä»¶ï¼Œå…·ä½“å»ºé€ è€…åˆ›å»ºè¯¥äº§å“çš„å†…éƒ¨è¡¨ç¤ºå¹¶å®šä¹‰å®ƒçš„è£…é…è¿‡ç¨‹ã€‚
* Directorï¼ˆæŒ‡æŒ¥è€…ï¼‰ï¼šæŒ‡æŒ¥è€…åˆç§°ä¸ºå¯¼æ¼”ç±»ï¼Œå®ƒè´Ÿè´£å®‰æ’å¤æ‚å¯¹è±¡çš„å»ºé€ æ¬¡åºï¼ŒæŒ‡æŒ¥è€…ä¸æŠ½è±¡å»ºé€ è€…ä¹‹é—´å­˜åœ¨å…³è”å…³ç³»ï¼Œå¯ä»¥åœ¨å…¶ `construct()` å»ºé€ æ–¹æ³•ä¸­è°ƒç”¨å»ºé€ è€…å¯¹è±¡çš„éƒ¨ä»¶æ„é€ ä¸è£…é…æ–¹æ³•ï¼Œå®Œæˆå¤æ‚å¯¹è±¡çš„å»ºé€ ã€‚å®¢æˆ·ç«¯ä¸€èˆ¬åªéœ€è¦ä¸æŒ‡æŒ¥è€…è¿›è¡Œäº¤äº’ï¼Œåœ¨å®¢æˆ·ç«¯ç¡®å®šå…·ä½“å»ºé€ è€…çš„ç±»å‹ï¼Œå¹¶å®ä¾‹åŒ–å…·ä½“å»ºé€ è€…å¯¹è±¡ï¼ˆä¹Ÿå¯ä»¥é€šè¿‡é…ç½®æ–‡ä»¶å’Œåå°„æœºåˆ¶ï¼‰ï¼Œç„¶åé€šè¿‡æŒ‡æŒ¥è€…ç±»çš„æ„é€ å‡½æ•°æˆ–è€… Setter æ–¹æ³•å°†è¯¥å¯¹è±¡ä¼ å…¥æŒ‡æŒ¥è€…ç±»ä¸­ã€‚

åœ¨å»ºé€ è€…æ¨¡å¼çš„å®šä¹‰ä¸­æåˆ°äº†**å¤æ‚å¯¹è±¡**ï¼Œé‚£ä¹ˆä»€ä¹ˆæ˜¯å¤æ‚å¯¹è±¡ï¼Ÿç®€å•æ¥è¯´ï¼Œå¤æ‚å¯¹è±¡æ˜¯æŒ‡é‚£äº›åŒ…å«å¤šä¸ªæˆå‘˜å±æ€§çš„å¯¹è±¡ï¼Œè¿™äº›æˆå‘˜å±æ€§ä¹Ÿç§°ä¸ºéƒ¨ä»¶æˆ–é›¶ä»¶ï¼Œå¦‚æ±½è½¦åŒ…æ‹¬æ–¹å‘ç›˜ã€å‘åŠ¨æœºã€è½®èƒç­‰éƒ¨ä»¶ï¼Œç”µå­é‚®ä»¶åŒ…æ‹¬å‘ä»¶äººã€æ”¶ä»¶äººã€ä¸»é¢˜ã€å†…å®¹ã€é™„ä»¶ç­‰éƒ¨ä»¶ï¼Œä¸€ä¸ªå…¸å‹çš„å¤æ‚å¯¹è±¡ç±»ä»£ç ç¤ºä¾‹å¦‚ä¸‹ï¼š

```text
class Product {
    // å®šä¹‰éƒ¨ä»¶ï¼Œéƒ¨ä»¶å¯ä»¥æ˜¯ä»»æ„ç±»å‹ï¼ŒåŒ…æ‹¬å€¼ç±»å‹å’Œå¼•ç”¨ç±»å‹
    private String partA;
    private String partB;
    private String partC;
    // partA çš„ Getter æ–¹æ³•å’Œ Setter æ–¹æ³•çœç•¥
    // partB çš„ Getter æ–¹æ³•å’Œ Setter æ–¹æ³•çœç•¥
    // partC çš„ Getter æ–¹æ³•å’Œ Setter æ–¹æ³•çœç•¥
}
```

åœ¨æŠ½è±¡å»ºé€ è€…ç±»ä¸­å®šä¹‰äº†äº§å“çš„åˆ›å»ºæ–¹æ³•å’Œè¿”å›æ–¹æ³•ï¼Œå…¶å…¸å‹ä»£ç å¦‚ä¸‹ï¼š

```text
abstract class Builder {
    // åˆ›å»ºäº§å“å¯¹è±¡
    protected Product product=new Product();
    public abstract void buildPartA();
    public abstract void buildPartB();
    public abstract void buildPartC();
    // è¿”å›äº§å“å¯¹è±¡
    public  Product getResult() {
        return  product;
    }
}
```

åœ¨æŠ½è±¡ç±» `Builder` ä¸­å£°æ˜äº†ä¸€ç³»åˆ—æŠ½è±¡çš„ `buildPartX()` æ–¹æ³•ç”¨äºåˆ›å»ºå¤æ‚äº§å“çš„å„ä¸ªéƒ¨ä»¶ï¼Œå…·ä½“å»ºé€ è¿‡ç¨‹åœ¨ `ConcreteBuilder` ä¸­å®ç°ï¼Œæ­¤å¤–è¿˜æä¾›äº†å·¥å‚æ–¹æ³• `getResult()`ï¼Œç”¨äºè¿”å›ä¸€ä¸ªå»ºé€ å¥½çš„å®Œæ•´äº§å“ã€‚

åœ¨ `ConcreteBuilder` ä¸­å®ç°äº† `buildPartX()` æ–¹æ³•ï¼Œé€šè¿‡è°ƒç”¨ `Product` çš„ `setPartX()` æ–¹æ³•å¯ä»¥ç»™äº§å“å¯¹è±¡çš„æˆå‘˜å±æ€§è®¾å€¼ã€‚ä¸åŒçš„å…·ä½“å»ºé€ è€…åœ¨å®ç° `buildPartX()` æ–¹æ³•æ—¶å°†æœ‰æ‰€åŒºåˆ«ï¼Œå¦‚ `setPartX()` æ–¹æ³•çš„å‚æ•°å¯èƒ½ä¸ä¸€æ ·ï¼Œåœ¨æœ‰äº›å…·ä½“å»ºé€ è€…ç±»ä¸­æŸäº› `setPartX()` æ–¹æ³•æ— é¡»å®ç°ï¼ˆæä¾›ä¸€ä¸ªç©ºå®ç°ï¼‰ã€‚è€Œè¿™äº›å¯¹äºå®¢æˆ·ç«¯æ¥è¯´éƒ½æ— é¡»å…³å¿ƒï¼Œå®¢æˆ·ç«¯åªéœ€çŸ¥é“å…·ä½“å»ºé€ è€…ç±»å‹å³å¯ã€‚

åœ¨å»ºé€ è€…æ¨¡å¼çš„ç»“æ„ä¸­è¿˜å¼•å…¥äº†ä¸€ä¸ªæŒ‡æŒ¥è€…ç±» `Director`ï¼Œè¯¥ç±»ä¸»è¦æœ‰ä¸¤ä¸ªä½œç”¨ï¼šä¸€æ–¹é¢å®ƒéš”ç¦»äº†å®¢æˆ·ä¸åˆ›å»ºè¿‡ç¨‹ï¼›å¦ä¸€æ–¹é¢å®ƒæ§åˆ¶äº§å“çš„åˆ›å»ºè¿‡ç¨‹ï¼ŒåŒ…æ‹¬æŸä¸ª `buildPartX()` æ–¹æ³•æ˜¯å¦è¢«è°ƒç”¨ä»¥åŠå¤šä¸ª `buildPartX()` æ–¹æ³•è°ƒç”¨çš„å…ˆåæ¬¡åºç­‰ã€‚æŒ‡æŒ¥è€…é’ˆå¯¹æŠ½è±¡å»ºé€ è€…ç¼–ç¨‹ï¼Œå®¢æˆ·ç«¯åªéœ€è¦çŸ¥é“å…·ä½“å»ºé€ è€…çš„ç±»å‹ï¼Œå³å¯é€šè¿‡æŒ‡æŒ¥è€…ç±»è°ƒç”¨å»ºé€ è€…çš„ç›¸å…³æ–¹æ³•ï¼Œè¿”å›ä¸€ä¸ªå®Œæ•´çš„äº§å“å¯¹è±¡ã€‚åœ¨å®é™…ç”Ÿæ´»ä¸­ä¹Ÿå­˜åœ¨ç±»ä¼¼æŒ‡æŒ¥è€…ä¸€æ ·çš„è§’è‰²ï¼Œå¦‚ä¸€ä¸ªå®¢æˆ·å»è´­ä¹°ç”µè„‘ï¼Œç”µè„‘é”€å”®äººå‘˜ç›¸å½“äºæŒ‡æŒ¥è€…ï¼Œåªè¦å®¢æˆ·ç¡®å®šç”µè„‘çš„ç±»å‹ï¼Œç”µè„‘é”€å”®äººå‘˜å¯ä»¥é€šçŸ¥ç”µè„‘ç»„è£…äººå‘˜ç»™å®¢æˆ·ç»„è£…ä¸€å°ç”µè„‘ã€‚æŒ‡æŒ¥è€…ç±»çš„ä»£ç ç¤ºä¾‹å¦‚ä¸‹ï¼š

```text
class Director {
    private Builder builder;
    public Director(Builder builder) {
        this.builder=builder;
    }
    public void setBuilder(Builder builder) {
        this.builder=builer;
    }
    
    // äº§å“æ„å»ºä¸ç»„è£…æ–¹æ³•
    public Product construct() {
        builder.buildPartA();
        builder.buildPartB();
        builder.buildPartC();
        return builder.getResult();
    }
}
```

åœ¨æŒ‡æŒ¥è€…ç±»ä¸­å¯ä»¥æ³¨å…¥ä¸€ä¸ªæŠ½è±¡å»ºé€ è€…ç±»å‹çš„å¯¹è±¡ï¼Œå…¶æ ¸å¿ƒåœ¨äºæä¾›äº†ä¸€ä¸ªå»ºé€ æ–¹æ³• `construct()`ï¼Œåœ¨è¯¥æ–¹æ³•ä¸­è°ƒç”¨äº†  `builder` å¯¹è±¡çš„æ„é€ éƒ¨ä»¶çš„æ–¹æ³•ï¼Œæœ€åè¿”å›ä¸€ä¸ªäº§å“å¯¹è±¡ã€‚

å¯¹äºå®¢æˆ·ç«¯è€Œè¨€ï¼Œåªéœ€å…³å¿ƒå…·ä½“çš„å»ºé€ è€…å³å¯ï¼Œä¸€èˆ¬æƒ…å†µä¸‹ï¼Œå®¢æˆ·ç«¯ç±»ä»£ç ç‰‡æ®µå¦‚ä¸‹æ‰€ç¤ºï¼š

```text
â€¦â€¦
Builder  builder = new ConcreteBuilder(); //å¯é€šè¿‡é…ç½®æ–‡ä»¶å®ç°
Director director = new  Director(builder);
Product product = director.construct();
â€¦â€¦
```

å¯ä»¥é€šè¿‡é…ç½®æ–‡ä»¶æ¥å­˜å‚¨å…·ä½“å»ºé€ è€…ç±» `ConcreteBuilder` çš„ç±»åï¼Œä½¿å¾—æ›´æ¢æ–°çš„å»ºé€ è€…æ—¶æ— é¡»ä¿®æ”¹æºä»£ç ï¼Œç³»ç»Ÿæ‰©å±•æ›´ä¸ºæ–¹ä¾¿ã€‚åœ¨å®¢æˆ·ç«¯ä»£ç ä¸­ï¼Œæ— é¡»å…³å¿ƒäº§å“å¯¹è±¡çš„å…·ä½“ç»„è£…è¿‡ç¨‹ï¼Œåªéœ€æŒ‡å®šå…·ä½“å»ºé€ è€…çš„ç±»å‹å³å¯ã€‚

å»ºé€ è€…æ¨¡å¼ä¸æŠ½è±¡å·¥å‚æ¨¡å¼æœ‰ç‚¹ç›¸ä¼¼ï¼Œä½†æ˜¯å»ºé€ è€…æ¨¡å¼è¿”å›ä¸€ä¸ªå®Œæ•´çš„å¤æ‚äº§å“ï¼Œè€ŒæŠ½è±¡å·¥å‚æ¨¡å¼è¿”å›ä¸€ç³»åˆ—ç›¸å…³çš„äº§å“ï¼›åœ¨æŠ½è±¡å·¥å‚æ¨¡å¼ä¸­ï¼Œå®¢æˆ·ç«¯é€šè¿‡é€‰æ‹©å…·ä½“å·¥å‚æ¥ç”Ÿæˆæ‰€éœ€å¯¹è±¡ï¼Œè€Œåœ¨å»ºé€ è€…æ¨¡å¼ä¸­ï¼Œå®¢æˆ·ç«¯é€šè¿‡æŒ‡å®šå…·ä½“å»ºé€ è€…ç±»å‹å¹¶æŒ‡å¯¼ Director ç±»å¦‚ä½•å»ç”Ÿæˆå¯¹è±¡ï¼Œä¾§é‡äºä¸€æ­¥æ­¥æ„é€ ä¸€ä¸ªå¤æ‚å¯¹è±¡ï¼Œç„¶åå°†ç»“æœè¿”å›ã€‚å¦‚æœå°†æŠ½è±¡å·¥å‚æ¨¡å¼çœ‹æˆä¸€ä¸ªæ±½è½¦é…ä»¶ç”Ÿäº§å‚ï¼Œç”Ÿæˆä¸åŒç±»å‹çš„æ±½è½¦é…ä»¶ï¼Œé‚£ä¹ˆå»ºé€ è€…æ¨¡å¼å°±æ˜¯ä¸€ä¸ªæ±½è½¦ç»„è£…å‚ï¼Œé€šè¿‡å¯¹é…ä»¶è¿›è¡Œç»„è£…è¿”å›ä¸€è¾†å®Œæ•´çš„æ±½è½¦ã€‚

ğŸ¤” **æ€è€ƒ**ï¼šå¦‚æœæ²¡æœ‰æŒ‡æŒ¥è€…ç±»Directorï¼Œå®¢æˆ·ç«¯å°†å¦‚ä½•æ„å»ºå¤æ‚äº§å“ï¼Ÿ

## 3. å®Œæ•´è§£å†³æ–¹æ¡ˆ

Sunny å…¬å¸å¼€å‘äººå‘˜å†³å®šä½¿ç”¨å»ºé€ è€…æ¨¡å¼æ¥å®ç°æ¸¸æˆè§’è‰²çš„åˆ›å»ºï¼Œå…¶åŸºæœ¬ç»“æ„å¦‚å›¾ 3 æ‰€ç¤ºï¼š

![&#x56FE; 3  &#x6E38;&#x620F;&#x89D2;&#x8272;&#x521B;&#x5EFA;&#x7ED3;&#x6784;&#x56FE;](../.gitbook/assets/20201115161756911.gif)

 åœ¨å›¾ 3 ä¸­ï¼Œ`ActorController` å……å½“æŒ‡æŒ¥è€…ï¼Œ`ActorBuilder` å……å½“æŠ½è±¡å»ºé€ è€…ï¼Œ`HeroBuilder`ã€`AngelBuilder` å’Œ `DevilBuilder` å……å½“å…·ä½“å»ºé€ è€…ï¼Œ`Actor` å……å½“å¤æ‚äº§å“ã€‚å®Œæ•´ä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š

```text
// Actor è§’è‰²ç±»ï¼šå¤æ‚äº§å“ï¼Œè€ƒè™‘åˆ°ä»£ç çš„å¯è¯»æ€§ï¼Œåªåˆ—å‡ºéƒ¨åˆ†æˆå‘˜å±æ€§ï¼Œä¸”æˆå‘˜å±æ€§çš„ç±»å‹å‡ä¸º Stringï¼ŒçœŸå®æƒ…å†µä¸‹ï¼Œæœ‰äº›æˆå‘˜å±æ€§çš„ç±»å‹éœ€è‡ªå®šä¹‰
class Actor
{
    private String type; //è§’è‰²ç±»å‹
    private String sex; //æ€§åˆ«
    private String face; //è„¸å‹
    private String costume; //æœè£…
    private String hairstyle; //å‘å‹
    public void setType(String type) {
        this.type  = type;
    }
    public void setSex(String sex) {
        this.sex  = sex;
    }
    public void setFace(String face) {
        this.face  = face;
    }
    public void setCostume(String costume) {
        this.costume  = costume;
    }
    public void setHairstyle(String hairstyle) {
        this.hairstyle  = hairstyle;
    }
    public String getType() {
        return  (this.type);
    }
    public String getSex() {
        return  (this.sex);
    }
    public String getFace() {
        return  (this.face);
    }
    public String getCostume() {
        return  (this.costume);
    }
    public String getHairstyle() {
        return  (this.hairstyle);
    }
}
// è§’è‰²å»ºé€ å™¨ï¼šæŠ½è±¡å»ºé€ è€…
abstract class ActorBuilder
{
    protected  Actor actor = new Actor();
    public abstract void buildType();
    public abstract void buildSex();
    public abstract void buildFace();
    public abstract void buildCostume();
    public abstract void buildHairstyle();
    // å·¥å‚æ–¹æ³•ï¼Œè¿”å›ä¸€ä¸ªå®Œæ•´çš„æ¸¸æˆè§’è‰²å¯¹è±¡
    public Actor createActor()
    {
        return actor;
    }
}
// è‹±é›„è§’è‰²å»ºé€ å™¨ï¼šå…·ä½“å»ºé€ è€…
class HeroBuilder extends ActorBuilder
{
    public void buildType()
    {
        actor.setType("è‹±é›„");
    }
    public void buildSex()
    {
        actor.setSex("ç”·");
    }
    public void buildFace()
    {
        actor.setFace("è‹±ä¿Š");
    }
    public void buildCostume()
    {
        actor.setCostume("ç›”ç”²");
    }
    public void buildHairstyle()
    {
        actor.setHairstyle("é£˜é€¸");
    }    
}
// å¤©ä½¿è§’è‰²å»ºé€ å™¨ï¼šå…·ä½“å»ºé€ è€…
class AngelBuilder extends ActorBuilder
{
    public void buildType()
    {
        actor.setType("å¤©ä½¿");
    }
    public void buildSex()
    {
        actor.setSex("å¥³");
    }
    public void buildFace()
    {
        actor.setFace("æ¼‚äº®");
    }
    public void buildCostume()
    {
        actor.setCostume("ç™½è£™");
    }
    public void buildHairstyle()
    {
        actor.setHairstyle("æŠ«è‚©é•¿å‘");
    }    
}
// æ¶é­”è§’è‰²å»ºé€ å™¨ï¼šå…·ä½“å»ºé€ è€…
class DevilBuilder extends ActorBuilder
{
    public void buildType()
    {
        actor.setType("æ¶é­”");
    }
    public void buildSex()
    {
        actor.setSex("å¦–");
    }
    public void buildFace()
    {
        actor.setFace("ä¸‘é™‹");
    }
    public void buildCostume()
    {
        actor.setCostume("é»‘è¡£");
    }
    public void buildHairstyle()
    {
        actor.setHairstyle("å…‰å¤´");
    }    
}
```

æŒ‡æŒ¥è€…ç±» `ActorController` å®šä¹‰äº† `construct()` æ–¹æ³•ï¼Œè¯¥æ–¹æ³•æ‹¥æœ‰ä¸€ä¸ªæŠ½è±¡å»ºé€ è€… `ActorBuilder` ç±»å‹çš„å‚æ•°ï¼Œåœ¨è¯¥æ–¹æ³•å†…éƒ¨å®ç°äº†æ¸¸æˆè§’è‰²å¯¹è±¡çš„é€æ­¥æ„å»ºï¼Œä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š

```text
// æ¸¸æˆè§’è‰²åˆ›å»ºæ§åˆ¶å™¨ï¼šæŒ‡æŒ¥è€…
class ActorController
{
    // é€æ­¥æ„å»ºå¤æ‚äº§å“å¯¹è±¡
    public Actor construct(ActorBuilder ab)
    {
        Actor actor;
        ab.buildType();
        ab.buildSex();
        ab.buildFace();
        ab.buildCostume();
        ab.buildHairstyle();
        actor = ab.createActor();
        return actor;
    }
}
```

ä¸ºäº†æé«˜ç³»ç»Ÿçš„çµæ´»æ€§å’Œå¯æ‰©å±•æ€§ï¼Œæˆ‘ä»¬å°†å…·ä½“å»ºé€ è€…ç±»çš„ç±»åå­˜å‚¨åœ¨é…ç½®æ–‡ä»¶ä¸­ï¼Œå¹¶é€šè¿‡å·¥å…·ç±» `XMLUtil` æ¥è¯»å–é…ç½®æ–‡ä»¶å¹¶åå°„ç”Ÿæˆå¯¹è±¡ï¼Œ`XMLUtil` ç±»çš„ä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š

```text
import javax.xml.parsers.*;
import org.w3c.dom.*;
import org.xml.sax.SAXException;
import java.io.*;
class XMLUtil
{
    //è¯¥æ–¹æ³•ç”¨äºä»XMLé…ç½®æ–‡ä»¶ä¸­æå–å…·ä½“ç±»ç±»åï¼Œå¹¶è¿”å›ä¸€ä¸ªå®ä¾‹å¯¹è±¡
    public static Object getBean()
    {
        try
        {
            // åˆ›å»ºæ–‡æ¡£å¯¹è±¡
            DocumentBuilderFactory dFactory = DocumentBuilderFactory.newInstance();
            DocumentBuilder builder = dFactory.newDocumentBuilder();
            Document doc;                                                
            doc = builder.parse(new File("config.xml"));
            // è·å–åŒ…å«ç±»åçš„æ–‡æœ¬èŠ‚ç‚¹
            NodeList nl = doc.getElementsByTagName("className");
            Node classNode = nl.item(0).getFirstChild();
            String cName = classNode.getNodeValue();
            // é€šè¿‡ç±»åç”Ÿæˆå®ä¾‹å¯¹è±¡å¹¶å°†å…¶è¿”å›
            Class c = Class.forName(cName);
            Object obj = c.newInstance();
            return obj;
        }  
        catch(Exception e)
        {
            e.printStackTrace();
            return null;
        }
    }
}
```

é…ç½®æ–‡ä»¶ config.xml ä¸­å­˜å‚¨äº†å…·ä½“å»ºé€ è€…ç±»çš„ç±»åï¼Œä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š

```text
<?xml version="1.0"?>
<config>
       <className>AngelBuilder</className>
</config>
```

ç¼–å†™å¦‚ä¸‹å®¢æˆ·ç«¯æµ‹è¯•ä»£ç ï¼š

```text
class Client
{
    public  static void main(String args[])
    {
        ActorBuilder ab; // é’ˆå¯¹æŠ½è±¡å»ºé€ è€…ç¼–ç¨‹
        ab = (ActorBuilder)XMLUtil.getBean(); // åå°„ç”Ÿæˆå…·ä½“å»ºé€ è€…å¯¹è±¡
        ActorController ac = new  ActorController();
        Actor actor;
        actor = ac.construct(ab); // é€šè¿‡æŒ‡æŒ¥è€…åˆ›å»ºå®Œæ•´çš„å»ºé€ è€…å¯¹è±¡
        String type = actor.getType();
        System.out.println(type + "çš„å¤–è§‚ï¼š");
        System.out.println("æ€§åˆ«ï¼š" + actor.getSex());
        System.out.println("é¢å®¹ï¼š" + actor.getFace());
        System.out.println("æœè£…ï¼š" + actor.getCostume());
        System.out.println("å‘å‹ï¼š" + actor.getHairstyle());
    }
}
```

ç¼–è¯‘å¹¶è¿è¡Œç¨‹åºï¼Œè¾“å‡ºç»“æœå¦‚ä¸‹ï¼š

```text
å¤©ä½¿çš„å¤–è§‚ï¼š
æ€§åˆ«ï¼šå¥³
é¢å®¹ï¼šæ¼‚äº®
æœè£…ï¼šç™½è£™
å‘å‹ï¼šæŠ«è‚©é•¿å‘
```

åœ¨å»ºé€ è€…æ¨¡å¼ä¸­ï¼Œå®¢æˆ·ç«¯åªéœ€å®ä¾‹åŒ–æŒ‡æŒ¥è€…ç±»ï¼ŒæŒ‡æŒ¥è€…ç±»é’ˆå¯¹æŠ½è±¡å»ºé€ è€…ç¼–ç¨‹ï¼Œå®¢æˆ·ç«¯æ ¹æ®éœ€è¦ä¼ å…¥å…·ä½“çš„å»ºé€ è€…ç±»å‹ï¼ŒæŒ‡æŒ¥è€…å°†æŒ‡å¯¼å…·ä½“å»ºé€ è€…ä¸€æ­¥ä¸€æ­¥æ„é€ ä¸€ä¸ªå®Œæ•´çš„äº§å“ï¼ˆé€æ­¥è°ƒç”¨å…·ä½“å»ºé€ è€…çš„ `buildX()` æ–¹æ³•ï¼‰ï¼Œç›¸åŒçš„æ„é€ è¿‡ç¨‹å¯ä»¥åˆ›å»ºå®Œå…¨ä¸åŒçš„äº§å“ã€‚åœ¨æ¸¸æˆè§’è‰²å®ä¾‹ä¸­ï¼Œå¦‚æœéœ€è¦æ›´æ¢è§’è‰²ï¼Œåªéœ€è¦ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼Œæ›´æ¢å…·ä½“è§’è‰²å»ºé€ è€…ç±»å³å¯ï¼›å¦‚æœéœ€è¦å¢åŠ æ–°è§’è‰²ï¼Œå¯ä»¥å¢åŠ ä¸€ä¸ªæ–°çš„å…·ä½“è§’è‰²å»ºé€ è€…ç±»ä½œä¸ºæŠ½è±¡è§’è‰²å»ºé€ è€…çš„å­ç±»ï¼Œå†ä¿®æ”¹é…ç½®æ–‡ä»¶å³å¯ï¼ŒåŸæœ‰ä»£ç æ— é¡»ä¿®æ”¹ï¼Œå®Œå…¨ç¬¦åˆâ€œå¼€é—­åŸåˆ™â€ã€‚

## 4. å…³äº Director çš„è¿›ä¸€æ­¥è®¨è®º

æŒ‡æŒ¥è€…ç±» `Director` åœ¨å»ºé€ è€…æ¨¡å¼ä¸­æ‰®æ¼”éå¸¸é‡è¦çš„ä½œç”¨ï¼Œç®€å•çš„ `Director` ç±»ç”¨äºæŒ‡å¯¼å…·ä½“å»ºé€ è€…å¦‚ä½•æ„å»ºäº§å“ï¼Œå®ƒæŒ‰ä¸€å®šæ¬¡åºè°ƒç”¨ `Builder` çš„ `buildPartX()` æ–¹æ³•ï¼Œæ§åˆ¶è°ƒç”¨çš„å…ˆåæ¬¡åºï¼Œå¹¶å‘å®¢æˆ·ç«¯è¿”å›ä¸€ä¸ªå®Œæ•´çš„äº§å“å¯¹è±¡ã€‚ä¸‹é¢æˆ‘ä»¬è®¨è®ºå‡ ç§ `Director` çš„é«˜çº§åº”ç”¨æ–¹å¼ï¼š

### **1. çœç•¥ Director**

åœ¨æœ‰äº›æƒ…å†µä¸‹ï¼Œä¸ºäº†ç®€åŒ–ç³»ç»Ÿç»“æ„ï¼Œå¯ä»¥å°† ****`Director` å’ŒæŠ½è±¡å»ºé€ è€… `Builder` è¿›è¡Œåˆå¹¶ï¼Œåœ¨ `Builder` ä¸­æä¾›é€æ­¥æ„å»ºå¤æ‚äº§å“å¯¹è±¡çš„ `construct()` æ–¹æ³•ã€‚ç”±äº `Builder` ç±»é€šå¸¸ä¸ºæŠ½è±¡ç±»ï¼Œå› æ­¤å¯ä»¥å°† `construct()` æ–¹æ³•å®šä¹‰ä¸ºé™æ€ï¼ˆstaticï¼‰æ–¹æ³•ã€‚å¦‚æœå°†æ¸¸æˆè§’è‰²è®¾è®¡ä¸­çš„æŒ‡æŒ¥è€…ç±» `ActorController` çœç•¥ï¼Œ`ActorBuilder` ç±»çš„ä»£ç ä¿®æ”¹å¦‚ä¸‹ï¼š

```text
abstract class ActorBuilder
{
    protected static Actor actor = new  Actor();
    public abstract void buildType();
    public abstract void buildSex();
    public abstract void buildFace();
    public abstract void buildCostume();
    public abstract void buildHairstyle();
    public static Actor  construct(ActorBuilder ab)
    {
        ab.buildType();
        ab.buildSex();
        ab.buildFace();
        ab.buildCostume();
        ab.buildHairstyle();
        return actor;
    }
}
```

å¯¹åº”çš„å®¢æˆ·ç«¯ä»£ç ä¹Ÿå°†å‘ç”Ÿä¿®æ”¹ï¼Œå…¶ä»£ç ç‰‡æ®µå¦‚ä¸‹æ‰€ç¤ºï¼š

```text
â€¦â€¦
ActorBuilder ab;
ab = (ActorBuilder)XMLUtil.getBean();
Actor actor;
actor = ActorBuilder.construct(ab);
â€¦â€¦
```

é™¤æ­¤ä¹‹å¤–ï¼Œè¿˜æœ‰ä¸€ç§æ›´ç®€å•çš„å¤„ç†æ–¹æ³•ï¼Œå¯ä»¥å°† `construct()` æ–¹æ³•çš„å‚æ•°å»æ‰ï¼Œç›´æ¥åœ¨ `construct()` æ–¹æ³•ä¸­è°ƒç”¨ `buildPartX()` æ–¹æ³•ï¼Œä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š

```text
abstract class ActorBuilder
{
    protected Actor actor = new Actor();
    public abstract void buildType();
    public abstract void buildSex();
    public abstract void buildFace();
    public abstract void buildCostume();
    public abstract void buildHairstyle();
    public Actor construct()
    {
        this.buildType();
        this.buildSex();
        this.buildFace();
        this.buildCostume();
        this.buildHairstyle();
        return actor;
    }
}
```

å®¢æˆ·ç«¯ä»£ç ä»£ç ç‰‡æ®µå¦‚ä¸‹æ‰€ç¤ºï¼š

```text
â€¦â€¦
ActorBuilder ab;
ab = (ActorBuilder)XMLUtil.getBean();
Actor actor;
actor = ab.construct();
â€¦â€¦
```

æ­¤æ—¶ï¼Œ`construct()` æ–¹æ³•å®šä¹‰äº†å…¶ä»– `buildPartX()` æ–¹æ³•è°ƒç”¨çš„æ¬¡åºï¼Œä¸ºå…¶ä»–æ–¹æ³•çš„æ‰§è¡Œæä¾›äº†ä¸€ä¸ªæµç¨‹æ¨¡æ¿ï¼Œè¿™ä¸æˆ‘ä»¬åœ¨åé¢è¦å­¦ä¹ çš„æ¨¡æ¿æ–¹æ³•æ¨¡å¼éå¸¸ç±»ä¼¼ã€‚

ä»¥ä¸Šä¸¤ç§å¯¹ `Director` ç±»çš„çœç•¥æ–¹å¼éƒ½ä¸å½±å“ç³»ç»Ÿçš„çµæ´»æ€§å’Œå¯æ‰©å±•æ€§ï¼ŒåŒæ—¶è¿˜ç®€åŒ–äº†ç³»ç»Ÿç»“æ„ï¼Œä½†åŠ é‡äº†æŠ½è±¡å»ºé€ è€…ç±»çš„èŒè´£ï¼Œå¦‚æœ `construct()` æ–¹æ³•è¾ƒä¸ºå¤æ‚ï¼Œå¾…æ„å»ºäº§å“çš„ç»„æˆéƒ¨åˆ†è¾ƒå¤šï¼Œå»ºè®®è¿˜æ˜¯å°† `construct()` æ–¹æ³•å•ç‹¬å°è£…åœ¨ `Director` ä¸­ï¼Œè¿™æ ·åšæ›´ç¬¦åˆâ€œå•ä¸€èŒè´£åŸåˆ™â€ã€‚

### **2. é’©å­æ–¹æ³•çš„å¼•å…¥**

å»ºé€ è€…æ¨¡å¼é™¤äº†é€æ­¥æ„å»ºä¸€ä¸ªå¤æ‚äº§å“å¯¹è±¡å¤–ï¼Œè¿˜å¯ä»¥é€šè¿‡ ****Director ç±»æ¥æ›´åŠ ç²¾ç»†åœ°æ§åˆ¶äº§å“çš„åˆ›å»ºè¿‡ç¨‹ï¼Œä¾‹å¦‚å¢åŠ ä¸€ç±»ç§°ä¹‹ä¸ºé’©å­æ–¹æ³•ï¼ˆHookMethodï¼‰çš„ç‰¹æ®Šæ–¹æ³•æ¥æ§åˆ¶æ˜¯å¦å¯¹æŸä¸ª `buildPartX()` çš„è°ƒç”¨ã€‚

é’©å­æ–¹æ³•çš„è¿”å›ç±»å‹é€šå¸¸ä¸º boolean ç±»å‹ï¼Œæ–¹æ³•åä¸€èˆ¬ä¸º `isXXX()`ï¼Œé’©å­æ–¹æ³•å®šä¹‰åœ¨æŠ½è±¡å»ºé€ è€…ç±»ä¸­ã€‚ä¾‹å¦‚æˆ‘ä»¬å¯ä»¥åœ¨æ¸¸æˆè§’è‰²çš„æŠ½è±¡å»ºé€ è€…ç±» `ActorBuilder` ä¸­å®šä¹‰ä¸€ä¸ªæ–¹æ³• `isBareheaded()`ï¼Œç”¨äºåˆ¤æ–­æŸä¸ªè§’è‰²æ˜¯å¦ä¸ºâ€œå…‰å¤´ï¼ˆBareheadeï¼‰â€ï¼Œåœ¨ `ActorBuilder` ä¸ºä¹‹æä¾›ä¸€ä¸ªé»˜è®¤å®ç°ï¼Œå…¶è¿”å›å€¼ä¸º falseï¼Œä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š

```text
abstract class ActorBuilder
{
    protected Actor actor = new Actor();
    public abstract void buildType();
    public abstract void buildSex();
    public abstract void buildFace();
    public abstract void buildCostume();
    public abstract void buildHairstyle();
    // é’©å­æ–¹æ³•
    public boolean isBareheaded()
    {
        return false;
    }
    public Actor createActor()
    {
        return actor;
    }
}
```

å¦‚æœæŸä¸ªè§’è‰²æ— é¡»æ„å»ºå¤´å‘éƒ¨ä»¶ï¼Œä¾‹å¦‚â€œæ¶é­”ï¼ˆDevilï¼‰â€ï¼Œåˆ™å¯¹åº”çš„å…·ä½“å»ºé€ å™¨ `DevilBuilder` å°†è¦†ç›– `isBareheaded()` æ–¹æ³•ï¼Œå¹¶å°†è¿”å›å€¼æ”¹ä¸º trueï¼Œä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š

```text
class DevilBuilder extends ActorBuilder
{
    public void buildType()
    {
        actor.setType("æ¶é­”");
    }
    public void buildSex()
    {
        actor.setSex("å¦–");
    }
    public void buildFace()
    {
        actor.setFace("ä¸‘é™‹");
    }
    public void buildCostume()
    {
        actor.setCostume("é»‘è¡£");
    }
    public void buildHairstyle()
    {
        actor.setHairstyle("å…‰å¤´");
    }
    // è¦†ç›–é’©å­æ–¹æ³•
    public boolean isBareheaded()
    {
        return true;
    }     
}
```

æ­¤æ—¶ï¼ŒæŒ‡æŒ¥è€…ç±» `ActorController` çš„ä»£ç ä¿®æ”¹å¦‚ä¸‹ï¼š

```text
class ActorController
{
    public Actor construct(ActorBuilder ab)
    {
        Actor  actor;
        ab.buildType();
        ab.buildSex();
        ab.buildFace();
        ab.buildCostume();
        //é€šè¿‡é’©å­æ–¹æ³•æ¥æ§åˆ¶äº§å“çš„æ„å»º
        if(!ab.isBareheaded())
        {
            ab.buildHairstyle();
        }
        actor = ab.createActor();
        return actor;
    }
}
```

å½“åœ¨å®¢æˆ·ç«¯ä»£ç ä¸­æŒ‡å®šå…·ä½“å»ºé€ è€…ç±»å‹å¹¶é€šè¿‡æŒ‡æŒ¥è€…æ¥å®ç°äº§å“çš„é€æ­¥æ„å»ºæ—¶ï¼Œå°†è°ƒç”¨é’©å­æ–¹æ³• `isBareheaded()` æ¥åˆ¤æ–­æ¸¸æˆè§’è‰²æ˜¯å¦æœ‰å¤´å‘ï¼Œå¦‚æœ `isBareheaded()` æ–¹æ³•è¿”å› trueï¼Œå³æ²¡æœ‰å¤´å‘ï¼Œåˆ™è·³è¿‡æ„å»ºå‘å‹çš„æ–¹æ³• `buildHairstyle()`ï¼›å¦åˆ™å°†æ‰§è¡Œ `buildHairstyle()` æ–¹æ³•ã€‚é€šè¿‡å¼•å…¥é’©å­æ–¹æ³•ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ `Director` ä¸­å¯¹å¤æ‚äº§å“çš„æ„å»ºè¿›è¡Œç²¾ç»†çš„æ§åˆ¶ï¼Œä¸ä»…æŒ‡å®š `buildPartX()` æ–¹æ³•çš„æ‰§è¡Œé¡ºåºï¼Œè¿˜å¯ä»¥æ§åˆ¶æ˜¯å¦éœ€è¦æ‰§è¡ŒæŸä¸ª `buildPartX()` æ–¹æ³•ã€‚

## 5. å»ºé€ è€…æ¨¡å¼æ€»ç»“

å»ºé€ è€…æ¨¡å¼çš„æ ¸å¿ƒåœ¨äºå¦‚ä½•ä¸€æ­¥æ­¥æ„å»ºä¸€ä¸ªåŒ…å«å¤šä¸ªç»„æˆéƒ¨ä»¶çš„å®Œæ•´å¯¹è±¡ï¼Œä½¿ç”¨ç›¸åŒçš„æ„å»ºè¿‡ç¨‹æ„å»ºä¸åŒçš„äº§å“ï¼Œåœ¨è½¯ä»¶å¼€å‘ä¸­ï¼Œå¦‚æœæˆ‘ä»¬éœ€è¦åˆ›å»ºå¤æ‚å¯¹è±¡å¹¶å¸Œæœ›ç³»ç»Ÿå…·å¤‡å¾ˆå¥½çš„çµæ´»æ€§å’Œå¯æ‰©å±•æ€§å¯ä»¥è€ƒè™‘ä½¿ç”¨å»ºé€ è€…æ¨¡å¼ã€‚

### **1. ä¸»è¦ä¼˜ç‚¹**

å»ºé€ è€…æ¨¡å¼çš„ä¸»è¦ä¼˜ç‚¹å¦‚ä¸‹ï¼š

1. åœ¨å»ºé€ è€…æ¨¡å¼ä¸­ï¼Œå®¢æˆ·ç«¯ä¸å¿…çŸ¥é“äº§å“å†…éƒ¨ç»„æˆçš„ç»†èŠ‚ï¼Œå°†äº§å“æœ¬èº«ä¸äº§å“çš„åˆ›å»ºè¿‡ç¨‹è§£è€¦ï¼Œä½¿å¾—ç›¸åŒçš„åˆ›å»ºè¿‡ç¨‹å¯ä»¥åˆ›å»ºä¸åŒçš„äº§å“å¯¹è±¡ã€‚
2. æ¯ä¸€ä¸ªå…·ä½“å»ºé€ è€…éƒ½ç›¸å¯¹ç‹¬ç«‹ï¼Œè€Œä¸å…¶ä»–çš„å…·ä½“å»ºé€ è€…æ— å…³ï¼Œå› æ­¤å¯ä»¥å¾ˆæ–¹ä¾¿åœ°æ›¿æ¢å…·ä½“å»ºé€ è€…æˆ–å¢åŠ æ–°çš„å…·ä½“å»ºé€ è€…ï¼Œç”¨æˆ·ä½¿ç”¨ä¸åŒçš„å…·ä½“å»ºé€ è€…å³å¯å¾—åˆ°ä¸åŒçš„äº§å“å¯¹è±¡ã€‚ç”±äºæŒ‡æŒ¥è€…ç±»é’ˆå¯¹æŠ½è±¡å»ºé€ è€…ç¼–ç¨‹ï¼Œå¢åŠ æ–°çš„å…·ä½“å»ºé€ è€…æ— é¡»ä¿®æ”¹åŸæœ‰ç±»åº“çš„ä»£ç ï¼Œç³»ç»Ÿæ‰©å±•æ–¹ä¾¿ï¼Œç¬¦åˆâ€œå¼€é—­åŸåˆ™â€ã€‚
3. å¯ä»¥æ›´åŠ ç²¾ç»†åœ°æ§åˆ¶äº§å“çš„åˆ›å»ºè¿‡ç¨‹ã€‚å°†å¤æ‚äº§å“çš„åˆ›å»ºæ­¥éª¤åˆ†è§£åœ¨ä¸åŒçš„æ–¹æ³•ä¸­ï¼Œä½¿å¾—åˆ›å»ºè¿‡ç¨‹æ›´åŠ æ¸…æ™°ï¼Œä¹Ÿæ›´æ–¹ä¾¿ä½¿ç”¨ç¨‹åºæ¥æ§åˆ¶åˆ›å»ºè¿‡ç¨‹ã€‚

### **2. ä¸»è¦ç¼ºç‚¹**

å»ºé€ è€…æ¨¡å¼çš„ä¸»è¦ç¼ºç‚¹å¦‚ä¸‹ï¼š

1. å»ºé€ è€…æ¨¡å¼æ‰€åˆ›å»ºçš„äº§å“ä¸€èˆ¬å…·æœ‰è¾ƒå¤šçš„å…±åŒç‚¹ï¼Œå…¶ç»„æˆéƒ¨åˆ†ç›¸ä¼¼ï¼Œå¦‚æœäº§å“ä¹‹é—´çš„å·®å¼‚æ€§å¾ˆå¤§ï¼Œä¾‹å¦‚å¾ˆå¤šç»„æˆéƒ¨åˆ†éƒ½ä¸ç›¸åŒï¼Œä¸é€‚åˆä½¿ç”¨å»ºé€ è€…æ¨¡å¼ï¼Œå› æ­¤å…¶ä½¿ç”¨èŒƒå›´å—åˆ°ä¸€å®šçš„é™åˆ¶ã€‚
2. å¦‚æœäº§å“çš„å†…éƒ¨å˜åŒ–å¤æ‚ï¼Œå¯èƒ½ä¼šå¯¼è‡´éœ€è¦å®šä¹‰å¾ˆå¤šå…·ä½“å»ºé€ è€…ç±»æ¥å®ç°è¿™ç§å˜åŒ–ï¼Œå¯¼è‡´ç³»ç»Ÿå˜å¾—å¾ˆåºå¤§ï¼Œå¢åŠ ç³»ç»Ÿçš„ç†è§£éš¾åº¦å’Œè¿è¡Œæˆæœ¬ã€‚

### **3. é€‚ç”¨åœºæ™¯**

åœ¨ä»¥ä¸‹æƒ…å†µä¸‹å¯ä»¥è€ƒè™‘ä½¿ç”¨å»ºé€ è€…æ¨¡å¼ï¼š

1. éœ€è¦ç”Ÿæˆçš„äº§å“å¯¹è±¡æœ‰å¤æ‚çš„å†…éƒ¨ç»“æ„ï¼Œè¿™äº›äº§å“å¯¹è±¡é€šå¸¸åŒ…å«å¤šä¸ªæˆå‘˜å±æ€§ã€‚
2. éœ€è¦ç”Ÿæˆçš„äº§å“å¯¹è±¡çš„å±æ€§ç›¸äº’ä¾èµ–ï¼Œéœ€è¦æŒ‡å®šå…¶ç”Ÿæˆé¡ºåºã€‚
3. å¯¹è±¡çš„åˆ›å»ºè¿‡ç¨‹ç‹¬ç«‹äºåˆ›å»ºè¯¥å¯¹è±¡çš„ç±»ã€‚åœ¨å»ºé€ è€…æ¨¡å¼ä¸­é€šè¿‡å¼•å…¥äº†æŒ‡æŒ¥è€…ç±»ï¼Œå°†åˆ›å»ºè¿‡ç¨‹å°è£…åœ¨æŒ‡æŒ¥è€…ç±»ä¸­ï¼Œè€Œä¸åœ¨å»ºé€ è€…ç±»å’Œå®¢æˆ·ç±»ä¸­ã€‚
4. éš”ç¦»å¤æ‚å¯¹è±¡çš„åˆ›å»ºå’Œä½¿ç”¨ï¼Œå¹¶ä½¿å¾—ç›¸åŒçš„åˆ›å»ºè¿‡ç¨‹å¯ä»¥åˆ›å»ºä¸åŒçš„äº§å“ã€‚

ğŸ¤” **ç»ƒä¹ **ï¼šSunny è½¯ä»¶å…¬å¸æ¬²å¼€å‘ä¸€ä¸ªè§†é¢‘æ’­æ”¾è½¯ä»¶ï¼Œä¸ºäº†ç»™ç”¨æˆ·ä½¿ç”¨æä¾›æ–¹ä¾¿ï¼Œè¯¥æ’­æ”¾è½¯ä»¶æä¾›å¤šç§ç•Œé¢æ˜¾ç¤ºæ¨¡å¼ï¼Œå¦‚å®Œæ•´æ¨¡å¼ã€ç²¾ç®€æ¨¡å¼ã€è®°å¿†æ¨¡å¼ã€ç½‘ç»œæ¨¡å¼ç­‰ã€‚åœ¨ä¸åŒçš„æ˜¾ç¤ºæ¨¡å¼ä¸‹ä¸»ç•Œé¢çš„ç»„æˆå…ƒç´ æœ‰æ‰€å·®å¼‚ï¼Œå¦‚åœ¨å®Œæ•´æ¨¡å¼ä¸‹å°†æ˜¾ç¤ºèœå•ã€æ’­æ”¾åˆ—è¡¨ã€ä¸»çª—å£ã€æ§åˆ¶æ¡ç­‰ï¼Œåœ¨ç²¾ç®€æ¨¡å¼ä¸‹åªæ˜¾ç¤ºä¸»çª—å£å’Œæ§åˆ¶æ¡ï¼Œè€Œåœ¨è®°å¿†æ¨¡å¼ä¸‹å°†æ˜¾ç¤ºä¸»çª—å£ã€æ§åˆ¶æ¡ã€æ”¶è—åˆ—è¡¨ç­‰ã€‚å°è¯•ä½¿ç”¨å»ºé€ è€…æ¨¡å¼è®¾è®¡è¯¥è½¯ä»¶ã€‚

ã€ä½œè€…ï¼šåˆ˜ä¼Ÿ [http://blog.csdn.net/lovelion](http://blog.csdn.net/lovelion)ã€‘

